<script>
    function submit_this_form() {
        $('#jobform').submit(function(e) {
            console.log(e);
            $('#jobsubmitbtn').hide();
            $('#pageloader').show();
        });
    }


</script>

<div class="container row" id="form_id">
    <div class="col-12">
        <form method="POST" enctype="multipart/form-data" id="jobform">
            {% csrf_token %}
                <fieldset class="form-group">
                    <legend class="border-bottom mb-4">Start New Job</legend>
                        <label for="id_sbml_file_Addon01" class="label">Please upload your model in valid SBML format.
                        Size must be <{{ max_upload }}, allowed extensions: <code>.xml, .json, .sbml</code></label>
                        <div class="input-group">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="id_sbml_file_Addon01">Upload</span>
                          </div>
                          <div class="custom-file">
                              {{ job_form.sbml_file }}
                            <label class="custom-file-label" for="id_sbml_file">Choose file</label>
                          </div>
                        </div>

                    {% if job_form.sbml_file.errors %}
                        <div id="form-errors">
                            <script>
                                sbml_errors = true;
                            </script>
                            <noscript>
                            <ul>
                            {% for error in job_form.sbml_file.errors %}
                                <li><small class="text text-danger">{{ error|escape }}</small></li>
                            {% endfor %}
                            </ul>
                            </noscript>
                        </div>

                    {% endif %}
                </fieldset>
                <div class="form-group">
                    <div class="row">
                        <div class="col-sm-1 text-right pr-1">
                                        {{ job_form.compression }}
                        </div>
                        <div class="col-sm-6 text-left pl-1">
                    <label for="compression">Compress network <small>(improves runtime but may not work with some models)</small>.</label>
                        </div>
                    </div>
                    <div class="row">
                            <div class="col-sm-1 text-right pr-1">
                    {{ job_form.make_consistent }}
                            </div>
                            <div class="col-sm-6 text-left pl-1">
                    <label for="make_consistent">Make model consistent <small>(testing)</small></label>
                            </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-1 text-right pr-1">
                    {{ job_form.cardinality }}
                        </div>
                        <div class="col-sm-6 text-left pl-1">
                    <label for="cardinality">Cardinality <small>(for larger models, only =< 3 feasible)</small></label><br>
                        </div>
                    </div>

                    <br>
                    <datalist id="defaultNumbers">
                      <option value="2">
                      <option value="1">
                      <option value="3">
                      <option value="4">
                    </datalist>

                <button class="btn btn-outline-info" id="jobsubmitbtn" onclick='submit_this_form()'>Submit</button>
                    <div id="pageloader" style="display: none;" class="row inline-block align-content-center">
                         <i class="fas fa-spinner fa-spin fa-2x text-info p-1 ml-3"></i><div class="text text-info p-2"> Uploading and validating file, please wait..</div>
                    </div>
                </div>
        </form>
    </div>
</div>

